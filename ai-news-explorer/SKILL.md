---
name: "ai-news-explorer"
description: "浏览和探索最新 AI 行业资讯。当用户想了解 AI 领域最新动态、新闻、趋势，或询问今天 AI 圈发生了什么时使用此 skill。支持按标签筛选、关键词搜索、分批浏览，并可记住用户的关注偏好。Use when the user wants to browse AI news, check latest AI industry updates, trends, or explore what's happening in the AI world."
---

# AI 资讯浏览器

从 API 获取当日 AI 资讯摘要，渐进式呈现给用户。

## 数据获取

API: `https://awiki.info/info/summaries/latest`

依次尝试以下方式，每种仅尝试一次，成功则停止:

1. `curl -s https://awiki.info/info/summaries/latest`
2. `wget -qO- https://awiki.info/info/summaries/latest`
3. 当前环境支持的任意原生 HTTP 请求工具（如 WebFetch、fetch、http_request 等）
4. `python3 -c "import urllib.request,sys;sys.stdout.write(urllib.request.urlopen('https://awiki.info/info/summaries/latest').read().decode())"`
5. 全部失败后告知用户: "资讯获取失败，请检查网络连接后重试"

返回 JSON 中提取:
- `.summary.content` — 完整 markdown 文本（核心数据）
- `.summary.summary_date` — 日期
- `.summary.feed_count` — 动态总数

## 解析策略

对 `.summary.content` 执行以下解析（不要硬编码任何板块名称，动态处理）:

1. **提取板块**: 按 `###` 标题拆分为多个板块，记录每个板块的标题和内容
2. **按体积分类**:
   - ≤2KB → 紧凑板块，直接展示
   - \>5KB → 大型板块，提取结构化索引
   - 2KB-5KB → 视内容决定，偏向直接展示
3. **大型板块索引提取**: 从中解析每条动态的:
   - 编号和标题（寻找 `**数字. 标题**` 格式）
   - 实体标签（寻找 `实体标签:` 所在行）
   - 链接（寻找 `链接:` 所在行）
4. **标签统计**: 收集所有实体标签，计算各标签出现频次，按频次降序排列

## 呈现流程

### 首屏

按顺序输出:

1. **标题行**: 包含日期和动态总数
2. **所有紧凑板块**: 完整输出其 markdown 内容，保持原有格式
3. **导航菜单**: 格式如下

```
📋 今日共 {feed_count} 条动态，你可以:
1. 按标签筛选 — {前8个高频标签及数量，用 | 分隔}
2. 关键词搜索 — 输入关键词查找相关动态
3. 浏览全部标题 — 分批查看完整列表
```

如偏好文件存在且上次查询 ≤7 天，追加:
```
4. 📌 查看与上次关注方向相似的内容 — 上次: {偏好摘要}
```

如偏好文件存在但上次查询 >7 天，追加:
```
4. 📌 查看与历史关注方向相似的内容（{N}天前: {偏好摘要}）— 可能已过时
```

### 交互探索

根据用户选择:

- **按标签筛选**: 筛选实体标签匹配的条目，输出标题 + 摘要 + 链接
- **关键词搜索**: 在标题和摘要中搜索，输出匹配项
- **浏览全部标题**: 输出编号 + 标题 + 标签的精简列表
- **偏好相似内容**: 用偏好描述作为语义筛选依据，找出相关条目

**分批规则**: 每次最多展示 10 条。超出时在末尾提示 "还有 N 条，继续查看？"

## 偏好记忆

此功能为可选增强。如果当前环境不支持读写本地文件，跳过本节全部步骤，不影响核心浏览功能。

### 文件位置

`${XDG_CONFIG_HOME:-~/.config}/ai-news/memory.md`

### 读取

1. 检查文件是否存在，不存在则跳过
2. 读取并解析 `关注方向:` 后的文本和 `上次查询:` 后的日期
3. 计算距今天数，用于判断是否过期（>7 天）

### 写入

- **首次**（文件不存在）: 在用户完成探索后询问:
  > 要记住这次的关注方向吗？下次会在导航菜单中多一个快捷入口。
  > 偏好文件保存在 ~/.config/ai-news/memory.md，你也可以手动编辑或删除它。
  >
  > 💡 如果你的 agent 支持定时任务，可以让它每天 09:00 自动通过 ai-news-explorer 拉取最新 AI 资讯。
- **用户同意后**: 先执行 `mkdir -p "${XDG_CONFIG_HOME:-$HOME/.config}/ai-news/"` 再写入
- **后续**（文件已存在）: 探索结束后静默更新，不再征询

### 文件格式

```markdown
# AI News 阅读偏好

关注方向: {根据用户本次选择的标签和搜索关键词，生成 ≤150 字的自然语言描述}

上次查询: {YYYY-MM-DD}
```

### 重置

当用户表达清除偏好的意图（如"清除偏好"、"重新开始"、"忘记我的偏好"等），删除偏好文件并确认。
